<!DOCTYPE html>
<html>
<head>
	<title>MyTower</title> 
  
	<script src="http://cdn.leafletjs.com/leaflet-0.4.5/leaflet.js"></script>
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.4.5/leaflet.css"/>
	<!--[if lte IE 8]>
    	<	link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.4.5/leaflet.ie.css" />
	<![endif]-->
	<script src="../demo/3d/JS/OSMBuildings-Leaflet.debug.js"></script>

	<style>
	body {
		padding: 0;
		margin: 0;
	}
	html, body, #map {
		height: 100%;
	}
	
   </style>
</head>

	<body>


	 <div id="map"></div>
    <script>
      var myTower = {
        "type": "FeatureCollection",
        "features": [
          {
            "type": "Feature",
            "properties": {
              "wallColor": "rgb(255,0,0)",
              "roofColor": "rgb(255,128,0)",
              "height": 30,
              "minHeight": 0,
              "piso": 0
            },
            "geometry": {
              "type": "Polygon",
              "coordinates": [
                [
                  [2.1853861212730408, 41.38901629106905],
                  [2.185828685760498, 41.388623892423745],
                  [2.1864724159240723, 41.38910281968238],
                  [2.185984253883362, 41.3894167364756],
                  [2.1853861212730408, 41.38901629106905]
                ]
              ]
            }
          },
          {
            "type": "Feature",
            "properties": {
              "wallColor": "",
              "roofColor": "",
              "height": 60,
              "minHeight": 30,
              "piso": 1
            },
            "geometry": {
              "type": "Polygon",
              "coordinates": [
                [
                  [2.185606062412262, 41.389012266479575],
                  [2.1858233213424683, 41.3888210981928],
                  [2.186225652694702, 41.38910483197434],
                  [2.1859654784202576, 41.38927386427688],
                  [2.185606062412262, 41.389012266479575]
                ]
              ]
            }
          },
          {
            "type": "Feature",
            "properties": {
              "wallColor": "",
              "roofColor": "",
              "height": 90,
              "minHeight": 60,
              "piso": 2
            },
            "geometry": {
              "type": "Polygon",
              "coordinates": [
                [
                  [2.185753583908081, 41.38902031565826],
                  [2.1858367323875423, 41.388959946793776],
                  [2.1860405802726746, 41.38910885655806],
                  [2.1859386563301086, 41.389177274443526],
                  [2.1857374906539917, 41.389022327952766],
                  [2.185753583908081, 41.38902031565826]
                ]
              ]
            }
          },
          {
            "type": "Feature",
            "properties": {
              "wallColor": "rgb(255,0,0)",
              "roofColor": "rgb(255,128,0)",
              "height": 120,
              "minHeight": 90,
              "piso": 3
            },
            "geometry": {
              "type": "Polygon",
              "coordinates": [
                [
                  [2.185858190059662, 41.38905653695002],
                  [2.185858190059662, 41.38907867217396],
                  [2.185882329940796, 41.38907867217396],
                  [2.185882329940796, 41.38905653695002],
                  [2.185858190059662, 41.38905653695002]
                ]
              ]
            }
          }
        ]
      }
    
    
    
    
      var map = new L.Map('map').setView([41.38886738109273, 2.1858716011047363], 18);

      new L.TileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',
          maxZoom: 22}
      ).addTo(map);


      for (i = 0, gridLength = myTower.features.length; i < gridLength; i++) {
          myTower.features[i].properties.wallColor = '#0033CC';
          myTower.features[i].properties.roofColor = 'rgb(150,180,210)';
          myTower.features[i].properties.height = myTower.features[i].properties.height * 20
          myTower.features[i].properties.minHeight = myTower.features[i].properties.minHeight * 20;
      }

      var osmb= new OSMBuildings(map).setData(myTower);
      
      osmb.setDate(new Date(2014, 04, 15, 8, 30))

      L.control.layers({}, { Buildings:osmb}).addTo(map);


    </script>
  </body>
</html>